[node]
name = "TIME Coin Node"
version = "1.0.0"
# Network type: "mainnet" or "testnet"
# Testnet: P2P=24100, RPC=24101, Address prefix=TIME0
network = "testnet"
# Allow this node to produce catchup blocks when behind consensus
# Only enable this on ONE designated catchup node to avoid conflicts
# Default: false (disabled)
enable_catchup_blocks = false

[network]
# P2P network settings
# Port is auto-selected based on network type unless explicitly set:
# - Testnet: 24100
listen_address = "0.0.0.0"  # Will use port 24100
# External address that other nodes can connect to (required for masternodes)
# Leave unset if you want to use listen_address (only works if not 0.0.0.0)
external_address = ""  # Example: "your-public-ip" or "your-domain.com"
max_peers = 50
enable_upnp = false
enable_peer_discovery = true
# Seed nodes for peer discovery
bootstrap_peers = []
# IPs to permanently blacklist (will not connect to or accept connections from)
#blacklisted_peers = ["1.2.3.4", "5.6.7.8"]
# IPs to whitelist (exempt from rate limiting and bans)
# Useful for trusted masternodes or infrastructure nodes
# These peers are automatically exempt from:
# - Rate limiting (>100 requests/minute)
# - Blacklist bans (violation strikes)
# - Connection limits
# Note: Masternodes are automatically whitelisted when discovered via P2P protocol
#whitelisted_peers = ["1.2.3.4", "5.6.7.8"]

[rpc]
# RPC API settings
enabled = true
# Port is auto-selected based on network type unless explicitly set:
# - Testnet: 24101
listen_address = "127.0.0.1"  # Will use port 24101
allow_origins = ["http://localhost:3000"]

[storage]
# Storage backend configuration
backend = "sled"  # Options: "memory", "sled"
# data_dir is auto-configured based on network type:
# - Mainnet: ~/.timecoin/ (Linux) or %APPDATA%\timecoin\ (Windows)
# - Testnet: ~/.timecoin/testnet/ (Linux) or %APPDATA%\timecoin\testnet\ (Windows)
# Override only if you need a custom location
data_dir = ""  # Leave empty for automatic platform-specific path
cache_size_mb = 256
# Enable zstd compression for block storage (saves ~60-70% disk space)
compress_blocks = true
# Storage mode: "archive" (keep all blocks) or "pruned" (keep recent blocks only)
mode = "archive"
# Number of recent blocks to keep when mode = "pruned"
prune_keep_blocks = 1000

[consensus]
# Avalanche consensus settings
voting_timeout_ms = 3000
min_masternodes = 3
# Avalanche uses simple majority (>50%) of total stake weight for finality
# Sample quorum within each round: alpha=14 out of k=20 validators (70%)
quorum_percentage = 51  # Simple majority for Avalanche consensus

[sync]
# Phase 3: Sync coordinator settings
# Enable proactive sync from best masternodes
enable_coordinator = true
# Interval to check peers for sync opportunities (seconds)
coordinator_interval_secs = 60
# Timeout for masternode sync requests (seconds)
masternode_sync_timeout_secs = 600
# Minimum blocks behind before triggering sync
min_blocks_behind = 5

[block]
# Block production settings
block_time_seconds = 600  # 10 minutes
max_block_size_kb = 1024
max_transactions_per_block = 10000

[logging]
# Logging configuration
level = "info"  # Options: "trace", "debug", "info", "warn", "error"
format = "pretty"  # Options: "json", "pretty"
output = "stdout"  # Options: "stdout", "file"
file_path = "./logs/testnet-node.log"

[masternode]
# Masternode settings (if running as masternode)
# The wallet address is automatically set from your node's wallet
# Tiers:
#   - free: Can receive block rewards, CANNOT vote on governance
#   - bronze: Can vote on governance, 1,000x rewards (1000 TIME collateral)
#   - silver: Can vote on governance, 10,000x rewards (10000 TIME collateral)
#   - gold: Can vote on governance, 100,000x rewards (100000 TIME collateral)
enabled = true
tier = "free"  # Options: "free", "bronze", "silver", "gold"
# For staked tiers (bronze/silver/gold), set collateral UTXO:
# 1. Send exact collateral to yourself: time-cli sendtoaddress <your_address> 1000.0
# 2. Find the TXID and output index from the transaction
# 3. Set both fields below, change tier, and restart the daemon
collateral_txid = ""
collateral_vout = 0

[security]
# Security settings
enable_rate_limiting = true
max_requests_per_second = 1000
enable_authentication = false
api_key = ""
# TLS encryption (infrastructure ready, integration in v1.1)
# enable_tls = false  # Not yet integrated in v1.0.0
# Ed25519 signature verification on all messages
enable_message_signing = true
# Maximum age of signed messages (prevents replay attacks)
message_max_age_seconds = 300  # 5 minutes

[ai]
# AI System Configuration
# Master switch to enable/disable all AI features
enabled = true
# Global learning rate for all AI modules (0.0-1.0)
learning_rate = 0.1
# Minimum samples required before AI makes predictions
min_samples = 10
# Enable automatic parameter tuning
auto_tuning = true

[ai.peer_selector]
# AI-powered peer selection for optimal sync performance
enabled = true
max_history = 1000

[ai.fork_resolver]
# AI-powered fork resolution with multi-factor analysis
enabled = true
confidence_threshold = 0.7

[ai.block_production]
# AI block production optimization (experimental)
enabled = false
failure_prediction = true
strategy_optimization = true

[ai.sync_recovery]
# AI sync failure recovery (experimental)
enabled = false

[ai.mempool_optimizer]
# AI mempool optimization (experimental)
enabled = false
predictive_loading = false

[ai.anomaly_detector]
# AI anomaly detection for security
enabled = true
alert_threshold = 2.0

[ai.network_optimizer]
# AI network optimization
enabled = true

[ai.predictive_sync]
# AI predictive sync
enabled = true

